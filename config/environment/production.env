# NEXUS Platform - Production Environment Configuration
# Security and Production Settings

# Application
NEXUS_MODE=production
NEXUS_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=production

# Database
DATABASE_URL=postgresql://nexus:${DB_PASSWORD}@${DB_HOST}:5432/nexus
POSTGRES_DB=nexus
POSTGRES_USER=nexus
POSTGRES_PASSWORD=${DB_PASSWORD}
POSTGRES_HOST=${DB_HOST}
POSTGRES_PORT=5432

# Redis
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:6379
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}

# API Configuration
API_HOST=0.0.0.0
API_PORT=4000
API_PREFIX=/api
CORS_ORIGINS=https://app.nexusplatform.com,https://admin.nexusplatform.com

# Frontend
FRONTEND_URL=https://app.nexusplatform.com
FRONTEND_PORT=3000

# Security - JWT Configuration
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_REFRESH_SECRET_KEY=${JWT_REFRESH_SECRET_KEY}
JWT_PRIVATE_KEY=${JWT_PRIVATE_KEY}
JWT_PUBLIC_KEY=${JWT_PUBLIC_KEY}
JWT_ALGORITHM=RS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Security - CSRF
CSRF_SECRET_KEY=${CSRF_SECRET_KEY}

# Security - Encryption
ENCRYPTION_KEY=${ENCRYPTION_KEY}
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}

# Security - Secrets Management
SECRETS_BACKEND=file
SECRETS_FILE=/etc/nexus/secrets.json
VAULT_URL=${VAULT_URL}
VAULT_TOKEN=${VAULT_TOKEN}

# Security - Audit Logging
AUDIT_LOG_FILE=/var/log/nexus/audit.log
AUDIT_RETENTION_DAYS=2555
AUDIT_ENCRYPTION_KEY_FILE=/etc/nexus/audit.key

# Monitoring
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
ELASTICSEARCH_URL=${ELASTICSEARCH_URL}
KIBANA_URL=${KIBANA_URL}

# Logging
LOG_LEVEL=INFO
LOG_FILE=/var/log/nexus/nexus.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5

# File Storage
UPLOAD_DIR=/var/nexus/uploads
MAX_FILE_SIZE=10485760
ALLOWED_EXTENSIONS=.pdf,.jpg,.jpeg,.png,.csv,.xlsx

# Email Configuration
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=587
SMTP_USERNAME=${SMTP_USERNAME}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_TLS=true

# External APIs
OPENAI_API_KEY=${OPENAI_API_KEY}
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}

# AWS Configuration (if using AWS services)
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=${AWS_REGION}
S3_BUCKET=${S3_BUCKET}

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/ssl/certs/nexus.crt
SSL_KEY_PATH=/etc/ssl/private/nexus.key
SSL_CA_PATH=/etc/ssl/certs/nexus-ca.crt

# Rate Limiting
RATE_LIMIT_REDIS_URL=${REDIS_URL}
RATE_LIMIT_ENABLED=true

# Compliance
GDPR_ENABLED=true
SOX_ENABLED=true
PCI_ENABLED=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=true

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Performance
WORKER_PROCESSES=4
WORKER_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=65
CLIENT_MAX_BODY_SIZE=10M

# Security Headers
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
CSP_ENABLED=true

# Database Security
DB_SSL_MODE=require
DB_SSL_CERT=/etc/ssl/certs/db-client.crt
DB_SSL_KEY=/etc/ssl/private/db-client.key
DB_SSL_ROOT_CERT=/etc/ssl/certs/db-ca.crt

# Redis Security
REDIS_SSL=true
REDIS_SSL_CERT=/etc/ssl/certs/redis-client.crt
REDIS_SSL_KEY=/etc/ssl/private/redis-client.key
REDIS_SSL_CA_CERT=/etc/ssl/certs/redis-ca.crt

# Zero Trust Architecture
ZERO_TRUST_ENABLED=true
ZERO_TRUST_PASSWORD=${ZERO_TRUST_PASSWORD}
ZERO_TRUST_SALT=${ZERO_TRUST_SALT}

# Threat Detection
THREAT_DETECTION_ENABLED=true
THREAT_DETECTION_REDIS_URL=${REDIS_URL}
THREAT_DETECTION_ALERT_WEBHOOK=${THREAT_DETECTION_ALERT_WEBHOOK}

# Compliance Reporting
COMPLIANCE_REPORTING_ENABLED=true
COMPLIANCE_REPORT_SCHEDULE=0 0 1 * *
COMPLIANCE_REPORT_RETENTION_DAYS=2555

# Data Retention
DATA_RETENTION_DAYS=2555
PII_RETENTION_DAYS=2555
AUDIT_RETENTION_DAYS=2555

# Backup and Recovery
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}
BACKUP_COMPRESSION=true
BACKUP_VERIFICATION=true

# Monitoring and Alerting
MONITORING_ENABLED=true
ALERTING_ENABLED=true
ALERT_WEBHOOK_URL=${ALERT_WEBHOOK_URL}
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
APM_ENABLED=true
APM_SERVER_URL=${APM_SERVER_URL}

# Security Scanning
SECURITY_SCANNING_ENABLED=true
VULNERABILITY_SCANNING_SCHEDULE=0 2 * * 0
DEPENDENCY_SCANNING_ENABLED=true

# Container Security
CONTAINER_SECURITY_ENABLED=true
CONTAINER_SCANNING_ENABLED=true
IMAGE_SCANNING_ENABLED=true

# Network Security
FIREWALL_ENABLED=true
DDoS_PROTECTION_ENABLED=true
WAF_ENABLED=true

# Data Protection
DATA_ENCRYPTION_AT_REST=true
DATA_ENCRYPTION_IN_TRANSIT=true
FIELD_LEVEL_ENCRYPTION=true

# Access Control
RBAC_ENABLED=true
ABAC_ENABLED=true
MFA_ENABLED=true
BIOMETRIC_AUTH_ENABLED=false

# Session Management
SESSION_TIMEOUT_MINUTES=30
SESSION_REFRESH_THRESHOLD_MINUTES=5
MAX_CONCURRENT_SESSIONS=3
SESSION_ENCRYPTION=true

# API Security
API_VERSIONING_ENABLED=true
API_DEPRECATION_NOTICE_DAYS=90
API_RATE_LIMITING_ENABLED=true
API_THROTTLING_ENABLED=true

# Content Security
CSP_ENABLED=true
CSP_REPORT_URI=/api/v1/security/csp-report
CSP_REPORT_ONLY=false

# Privacy
PRIVACY_MODE_ENABLED=true
ANONYMIZATION_ENABLED=true
DATA_MASKING_ENABLED=true
PII_DETECTION_ENABLED=true
