# NEXUS Platform - Staging Environment Configuration
# Staging environment with enhanced monitoring and security testing

# Application Settings
NEXUS_MODE=staging
APP_ENV=staging
APP_DEBUG=false
APP_PORT=8000
DEBUG=false
LOG_LEVEL=INFO

# Database Configuration - Staging
DATABASE_URL=postgresql://nexus_staging:nexus_staging_123@nexus-postgres-staging:5432/nexus_staging_db
DB_HOST=nexus-postgres-staging
DB_PORT=5432
DB_NAME=nexus_staging_db
DB_USER=nexus_staging
DB_PASSWORD=nexus_staging_123
DB_POOL_SIZE=15
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800
DB_ECHO=false

# Redis Configuration - Staging
REDIS_URL=redis://nexus-redis-staging:6379/0
REDIS_HOST=nexus-redis-staging
REDIS_PORT=6379
REDIS_PASSWORD=nexus_staging_123
REDIS_DB=0

# Elasticsearch Configuration - Staging
ELASTICSEARCH_URL=http://nexus-elasticsearch-staging:9200
ELASTICSEARCH_HOST=nexus-elasticsearch-staging
ELASTICSEARCH_PORT=9200

# RabbitMQ Configuration - Staging
RABBITMQ_URL=amqp://nexus_staging:nexus_staging_123@nexus-rabbitmq-staging:5672/
RABBITMQ_HOST=nexus-rabbitmq-staging
RABBITMQ_PORT=5672
RABBITMQ_USER=nexus_staging
RABBITMQ_PASSWORD=nexus_staging_123
RABBITMQ_VHOST=/

# Security Configuration - Staging
JWT_SECRET_KEY=nexus_staging_jwt_secret_key_2024_secure_random_string
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ENCRYPTION_KEY=nexus_staging_encryption_key_2024_secure_random_string

# MFA Configuration - Staging
MFA_ISSUER_NAME=NEXUS Platform Staging

# CORS Configuration - Staging
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,https://staging.nexusplatform.com
CORS_ALLOW_CREDENTIALS=true

# SSL/TLS Configuration - Staging (disabled for easier testing)
SSL_ENABLED=false
# SSL_CERTFILE=/etc/ssl/certs/nexus-staging.crt
# SSL_KEYFILE=/etc/ssl/private/nexus-staging.key

# Monitoring Configuration - Staging
PROMETHEUS_ENABLED=true
PROMETHEUS_URL=http://nexus-prometheus-staging:9090
PROMETHEUS_PORT=9090
GRAFANA_ENABLED=true
GRAFANA_URL=http://nexus-grafana-staging:3001
GRAFANA_PORT=3001
JAEGER_ENABLED=true
JAEGER_URL=http://nexus-jaeger-staging:14268/api/traces

# Logging Configuration - Staging
LOG_FORMAT=json
LOG_FILE=/nexus_backend/logs/nexus-staging.log
LOG_MAX_SIZE=50MB
LOG_BACKUP_COUNT=5
LOG_TO_CONSOLE=true

# Email Configuration - Staging (using test service)
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USERNAME=staging_test_user
SMTP_PASSWORD=staging_test_password
SMTP_USE_TLS=true
EMAIL_FROM=noreply-staging@nexusplatform.com

# File Storage Configuration - Staging
UPLOAD_DIR=/nexus_backend/uploads
MAX_UPLOAD_SIZE=50MB
ALLOWED_EXTENSIONS=pdf,doc,docx,xls,xlsx,csv,txt,jpg,jpeg,png

# Backup Configuration - Staging
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_DIR=/nexus_backend/backups
# BACKUP_S3_BUCKET=nexus-staging-backups
# BACKUP_S3_REGION=us-east-1

# Rate Limiting - Staging (more permissive for testing)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=5000
RATE_LIMIT_WINDOW=3600

# Session Configuration - Staging
SESSION_SECRET=nexus_staging_session_secret_2024_secure_random_string
SESSION_TIMEOUT=3600
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# API Configuration - Staging
API_VERSION=v1
API_PREFIX=/api/v1
API_DOCS_ENABLED=true
API_REDOC_ENABLED=true
API_SWAGGER_ENABLED=true

# Health Check Configuration - Staging
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=15
HEALTH_CHECK_RETRIES=3

# Performance Configuration - Staging
CACHE_ENABLED=true
CACHE_TTL=1800
CACHE_MAX_SIZE=500

# Security Headers - Staging (slightly relaxed for testing)
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=86400
CSP_ENABLED=false
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff

# Database Monitoring - Staging
DB_MONITORING_ENABLED=true
DB_SLOW_QUERY_THRESHOLD=500
DB_CONNECTION_MONITORING=true

# Error Reporting - Staging
ERROR_REPORTING_ENABLED=true
# SENTRY_DSN=https://staging-sentry-dsn@nexus-staging.sentry.io/project-id
ERROR_EMAIL=dev-team@nexusplatform.com

# Feature Flags - Staging
FEATURE_MFA_ENABLED=true
FEATURE_AUDIT_LOGGING=true
FEATURE_RISK_ASSESSMENT=true
FEATURE_COMPLIANCE_MONITORING=true
FEATURE_PERFORMANCE_MONITORING=true
FEATURE_ADVANCED_ANALYTICS=true

# External Services - Staging
EXTERNAL_API_TIMEOUT=30
EXTERNAL_API_RETRIES=3
EXTERNAL_API_RETRY_DELAY=1

# Payment Integration - Staging
STRIPE_PUBLISHABLE_KEY=pk_test_staging_stripe_key
STRIPE_SECRET_KEY=sk_test_staging_stripe_key
STRIPE_WEBHOOK_SECRET=whsec_staging_webhook_secret
PAYPAL_CLIENT_ID=staging_paypal_client_id
PAYPAL_CLIENT_SECRET=staging_paypal_client_secret

# Third-party Services - Staging
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/staging/webhook
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/staging/webhook

# Development/Testing - Staging
TESTING=false
MOCK_EXTERNAL_SERVICES=false
ENABLE_DEBUG_TOOLBAR=false
ENABLE_PROFILING=true

# Staging-Specific Settings
STAGING_LOAD_TESTING_ENABLED=true
STAGING_SECURITY_SCANNING_ENABLED=true
STAGING_PERFORMANCE_MONITORING_ENABLED=true
STAGING_AUTO_BACKUP_ENABLED=true

# Container-specific settings
CONTAINER_NAME=nexus-backend-staging
CONTAINER_PORT=8000
HOST_PORT=1001
